<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ryan.mapper.MyBookMapper">
	<select id="readingBook" resultType="com.ryan.domain.MyLibVO">
		SELECT * FROM my_lib WHERE member_email = #{memberEmail}	
	</select>
	
	<delete id="deleteList" parameterType="com.ryan.domain.MyLibVO">
		DELETE FROM my_lib WHERE book_num = #{bookNum} and member_email=#{memberEmail}
	</delete>
	
	<insert id="insertList" parameterType="com.ryan.domain.MyLibVO">
		INSERT INTO my_lib (member_email, book_num, sub_date) VALUES(#{memberEmail},#{bookNum},#{subDate})	
	</insert>



	<insert id="insertReadBook" parameterType="com.ryan.domain.MyReadBookVO">
		<![CDATA[
			INSERT INTO my_read_book (member_email, book_num, read_date) VALUES(#{memberEmail}, #{bookNum}, to_char(sysdate,'yyyy-mm-dd hh24:mm:ss'))
		]]>
	</insert>
	
	<select id="readBookList" resultType="com.ryan.domain.MyReadBookVO">
		<![CDATA[
			SELECT * FROM my_read_book WHERE member_email=#{memberEmail} order by read_date desc
		]]>
	</select>
	
	<update id="updateReadBook" parameterType="com.ryan.domain.MyReadBookVO">
		<![CDATA[
		 	update my_read_book set read_date=TO_CHAR(sysdate,'yyyy-mm-dd hh24:mm:ss') WHERE member_email=#{memberEmail} and book_num=#{bookNum}
		]]>
	</update>
	
	<delete id="deleteReadBook" parameterType="com.ryan.domain.MyReadBookVO">
		DELETE FROM my_read_book WHERE book_num=#{bookNum} and member_email=#{memberEmail}
	</delete>
</mapper>